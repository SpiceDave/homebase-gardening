<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <META HTTP-EQUIV="Pragma" CONTENT="no-cache">
		<META HTTP-EQUIV="Expires" CONTENT="-0">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="css/gig.css">
        <link href="css/smoothness/jquery-ui-1.10.2.custom.css" rel="stylesheet">
        <script src="js/vendor/modernizr-2.6.2.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->
        <div id="fb-root"></div>
		<script>
          window.fbAsyncInit = function() {
            // init the FB JS SDK
            FB.init({
              appId      : '544915695549363', // App ID from the App Dashboard
              channelUrl : 'https://homebase-gardening.herokuapp.com/channel.html', // Channel File for x-domain communication
              status     : true, // check the login status upon init?
              cookie     : true, // set sessions cookies to allow your server to access the session?
              xfbml      : true  // parse XFBML tags on this page?
            });
			setTimeout(function(){FB.Canvas.setSize({ height: 1000 })}, 1000);
          };

        </script>
		
        <div id="fb-container">
        	<header>
                <div id="garden-thumb"><img src="img/ancillary/GardenImgThumb.jpg" alt="Garden Image" width="183" height="130" /></div>
                <div id="head-copy"><img src="img/ancillary/headCopy-gig.gif" alt=" " height="105" width="549" /></div>
                <div id="search-box"><img src="img/ancillary/SearchBox.jpg" alt=" " width="208" height="105" usemap="#Map2" />
               
                  <map name="Map2">
                    <area shape="rect" coords="171,72,198,103" href="javascript:search('search', false);" alt="Search for tips...">
                  </map>
				<input id="search-box-txt" type="input" value="Search for tips..."/>
       		  </div>
                 <div id="tags"><strong>Filter by:</strong>&nbsp;&nbsp;&nbsp;
                	<a href="javascript:search('1');">Plants</a>&nbsp;&nbsp;&nbsp;
                    <a href="javascript:search('2');">Vegetables</a>&nbsp;&nbsp;&nbsp;
                    <a href="javascript:search('3');">Lawn</a>&nbsp;&nbsp;&nbsp;
                    <a href="javascript:search('4');">Trees</a>&nbsp;&nbsp;&nbsp;
                    <a href="javascript:search('5');">Garden Furniture</a>&nbsp;&nbsp;&nbsp;
                </div>
                <div style="clear:both"></div>
            </header>
            <div id="mosaic-container">
            	<div id="fb-mosaic"></div>
                <div id='t' class="border"></div>
                <div id='r' class="border"></div>
                <div id='b' class="border"></div>
                <div id='l' class="border"></div>
            </div>
            <div style="clear:both"></div>
        </div>
        <div id="pop-out"><img src="" alt="" width="430" height="172" usemap="#Map" title="" />
          <map name="Map">
            <area shape="rect" coords="345,0,430,30" href="#" onClick="closeX()">
          </map>
		</div>
        <footer>
        	<div id="footer-wrap">
                <div id="_d-shadow"></div>
             </div>
        </footer>

		
        
        
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.9.0.min.js"><\/script>')</script>
        <script src="js/jquery-ui-1.10.2.custom.js"></script>
        <script src="js/plugins.js"></script>
        <script src="js/main.js"></script>
        
        <script>
		jQuery('#pop-out').hide();

			jQuery(document).ready(function(){
				jQuery('#fb-mosaic').load('html/mozaic.html', function(e) {
					$(function() {
						$( document ).tooltip();
					});
					
				
					var mWidth = jQuery('#fb-mosaic').width();
					var mHeight = jQuery('#fb-mosaic').height();
					jQuery('.live-cell').on('mouseleave',function() {
						jQuery(document).clearQueue();
					});
					jQuery('.live-cell').on('mouseenter',function() {
						
						jQuery(this).attr('title', jQuery(this).attr('data-copy') + ' CLICK TO EXPAND...');

					});
					
					jQuery('.live-cell').on('click',function() {
						
												
						jQuery('#pop-out img').attr('src',jQuery(this).attr('data-image'));
						
					
						var cell = jQuery(this);
						var pos = cell.position();
						
						//normalise the pop-up box postion
						var top = pos.top;
						console.log(top);
						var left = pos.left;
						
						if(top > mHeight-200)
						{
							top = mHeight-200;
						}
						if(top < 28)
						{
							top = 28;
						}
						if(left > mWidth-458)
						{
							left = mWidth-458;
						}
						if(left < 28)
						{
							left = 28;
						}
						
						popUpBox(top, left);
						$( document ).tooltip( "close" );
					});
					jQuery('#search-box-txt').bind('keypress', function(event){
						if(event.which == 13)
						{
							search('search');
						}
					});

				});
			});
			
			
			function popUpBox(top, left){
				jQuery('#pop-out').clearQueue().hide(100, function(){
					jQuery('#pop-out').delay(500).css({'top':top + 'px', 'left':left}).show('fast');
					jQuery('.ui-tooltip').hide();
				});
			}
			
			function closeX(){
				jQuery('#pop-out').clearQueue().hide('fast');
			}
		
			//clear search field when user clicks in the box
			jQuery('#search-box-txt').on('click', function(){
				if(jQuery(this).val() == 'Search for tips...' || jQuery(this).val() == 'Sorry, no tips found...')
					jQuery(this).val('');
			});
			
			//search function
			function search(searchVal, tag){
				closeX();
				var resultsFound = false;
				jQuery('.live-cell').each(function(index){
					if(searchVal == 'search')
					{
						//get the string to be searched
						searchVal = jQuery('#search-box-txt').val().toLowerCase();
					}
					
					var thisAttrTag = jQuery(this).attr('data-tag').toLowerCase();
					var thisAttrName = jQuery(this).attr('data-name').toLowerCase();
					var thisAttrCopy = jQuery(this).attr('data-copy').toLowerCase();
					
					//clear the existing search highlighters
					jQuery(this).children('div').css('display','none');
					if(thisAttrName.search(searchVal) >= 0 || thisAttrCopy.search(searchVal) >= 0|| thisAttrTag.search(searchVal) >= 0)
					{
		   				
						jQuery(this).children('div').css('display','block');
						resultsFound = true;
						
					}
				});
				if(resultsFound == false)
				{
					jQuery('#search-box-txt').val('Sorry, no tips found...');
				}
			}
			
		</script>
        
          

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html>
